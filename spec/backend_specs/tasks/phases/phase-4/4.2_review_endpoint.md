```slc
@block TASK 4.2_review_endpoint
priority: critical
intent: "Implement POST /review endpoint with has_downloaded guard"
scope: phase-4
depends_on: [4.1_review_model, 3.2_download_tracking]
estimate: 25
status: todo

content:
  - Implement app/services/review_service.py:
      async def submit_review(session, user: User, data: ReviewRequest) -> ReviewSubmission:
        - Check user.has_downloaded == True — raise HTTPException 403 if False
          message: "You must download the SLC files before submitting a review"
        - Check if review already exists for user_id:
            - If exists: update project_link and review_text, update submitted_at
            - If not: create new ReviewSubmission
        - Commit and return ReviewSubmission

  - Implement app/routers/review.py:
      router = APIRouter(prefix="/review", tags=["review"])

      @router.post("", response_model=ReviewResponse, status_code=201)
      async def submit_review(
        data: ReviewRequest,
        current_user=Depends(get_current_user),
        session=Depends(get_session)
      ):
        - Call review_service.submit_review()
        - Return ReviewResponse

  - Register router in main.py under /api/v1

acceptance_criteria:
  - POST /api/v1/review with valid token + data from a user who downloaded returns 201
  - POST from user who has NOT downloaded returns 403
  - POST without token returns 401
  - Second POST from same user updates existing review (upsert)
  - project_link must be a valid URL — 422 if not
@end
```
