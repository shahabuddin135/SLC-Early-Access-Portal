```slc
@block TASK 2.3_login_endpoint
priority: critical
intent: "Implement POST /auth/login endpoint with JWT issuance"
scope: phase-2
depends_on: [2.2_register_endpoint]
estimate: 30
status: todo

content:
  - Implement app/core/security.py:
      def verify_password(plain: str, hashed: str) -> bool:
        - Use passlib CryptContext with bcrypt

      def create_access_token(data: dict, expires_delta: timedelta) -> str:
        - Use python-jose jwt.encode with settings.SECRET_KEY and settings.ALGORITHM
        - Add exp claim

      def decode_access_token(token: str) -> dict:
        - Use jwt.decode — raise HTTPException 401 on JWTError

  - Implement login logic in app/services/auth_service.py:
      async def login_user(session, data: LoginRequest) -> TokenResponse:
        - Fetch user by email — raise 401 if not found
        - Verify password — raise 401 if mismatch
        - Create JWT with sub=str(user.id)
        - Return TokenResponse

  - Implement in app/routers/auth.py:
      @router.post("/login", response_model=TokenResponse, status_code=200)
      async def login(data: LoginRequest, session=Depends(get_session)):
        - Call auth_service.login_user()
        - Return TokenResponse

  - Apply rate limiting: 10 requests per IP per minute

acceptance_criteria:
  - POST /api/v1/auth/login with valid credentials returns 200 + {access_token, token_type, user}
  - POST with wrong password returns 401
  - POST with unknown email returns 401
  - JWT decodes correctly and contains user id in sub claim
@end
```
